{"version":3,"sources":["components/Header/Header.jsx","components/Chat/Chat.jsx","components/Main/Main.jsx","files/video.mp4","App.js","index.js"],"names":["Header","props","handlerLogin","Function","prototype","handlerLoginOut","login","className","onClick","Chat","user","useState","value","setValue","messages","setMessages","db","getFirestore","sendMessage","a","addDoc","collection","uid","displayName","photo","photoURL","text","createAt","serverTimestamp","useEffect","getData","query","onSnapshot","querySnapshot","arr","forEach","doc","console","log","data","push","sort","b","map","item","id","src","alt","placeholder","onChange","event","target","Main","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","App","setLogin","setUser","auth","getAuth","provider","GoogleAuthProvider","signInWithPopup","then","result","catch","error","signOut","loop","muted","autoPlay","video","type","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sLACA,SAASA,EAAOC,GACd,MAIIA,EAHFC,oBADF,MACiBC,SAASC,UAD1B,IAIIH,EAFFI,uBAFF,MAEoBF,SAASC,UAF7B,EAGEE,EACEL,EADFK,MAGF,OACE,wBAAQC,UAAU,SAAlB,SACE,sBAAKA,UAAU,oBAAf,UACE,sBAAKA,UAAU,qBAAf,UACE,qBAAKA,UAAU,mBACf,qBAAKA,UAAU,mBACf,qBAAKA,UAAU,sBAEjB,qBAAKA,UAAU,cAAf,SACGD,EACC,wBAAQC,UAAU,cAAcC,QAASH,EAAzC,4CAEA,wBAAQE,UAAU,cAAcC,QAASN,EAAzC,mD,yCCdZ,SAASO,EAAKR,GACZ,IAAOS,EAAQT,EAARS,KACP,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KAEA,EAAgCF,mBAAS,IAAzC,mBAAOG,EAAP,KAAiBC,EAAjB,KAGMC,EAAKC,cAGLC,EAAW,uCAAG,sBAAAC,EAAA,sEAEZC,YAAOC,YAAWL,EAAI,QAAS,CACnCM,IAAKZ,EAAKY,IACVZ,KAAMA,EAAKa,YACXC,MAAOd,EAAKe,SACZC,KAAMd,EACNe,SAAUC,gBAPM,OASlBf,EAAS,IATS,2CAAH,qDA4BjB,OAfAgB,qBAAU,WACR,IAAMC,EAAUC,YAAMV,YAAWL,EAAI,SACrCgB,YAAWF,GAAS,SAACG,GACnB,IAAIC,EAAM,GACVD,EAAcE,SAAQ,SAASC,GAC7BC,QAAQC,IAAIF,EAAIG,OAAOZ,SAAU,OAAQS,EAAIG,QAC7CL,EAAIM,KAAKJ,EAAIG,WAEfL,EAAIO,MAAK,SAACtB,EAAEuB,GAAH,OACNvB,EAAEQ,SAAWe,EAAEf,YAElBZ,EAAYmB,QAEb,CAAClB,IAGF,0BAAST,UAAU,OAAnB,UACE,qBAAKA,UAAU,gBAAf,SACCO,EAAS6B,KACR,SAACC,GAAD,OACM,sBAAKrC,UAAU,aAAiCsC,GAAID,EAAKjB,SAAzD,UACE,qBAAKpB,UAAU,mBAAf,SACE,qBAAKuC,IAAKF,EAAKpB,MAAOuB,IAAKH,EAAKlC,SAElC,sBAAKH,UAAU,qBAAf,UAEE,mBAAGA,UAAU,mBAAb,SAAiCqC,EAAKlC,OACtC,mBAAGH,UAAU,kBAAb,SAAgCqC,EAAKlB,YAPRkB,EAAKjB,eAa9C,sBAAKpB,UAAU,cAAf,UACE,0BACEA,UAAU,iBACVyC,YAAY,MACZpC,MAAOA,EACPqC,SAAU,SAAAC,GAAK,OAAIrC,EAASqC,EAAMC,OAAOvC,UAE3C,wBAAQL,UAAU,aAAaC,QAASU,EAAxC,0EClER,SAASkC,EAAKnD,GACZ,MAKIA,EAJFC,oBADF,MACiBC,SAASC,UAD1B,EAEEE,EAGEL,EAHFK,MACAI,EAEET,EAFFS,KAIJ,OACE,sBAAMH,UAAU,OAAhB,SACGD,EACG,cAACG,EAAD,CAAMC,KAAMA,IAEd,wBAAQH,UAAU,YAAYC,QAASN,EAAvC,8CChBS,UAA0B,kC,gBCWxBmD,YACf,CACEC,OAAQ,0CACRC,WAAY,mCACZC,UAAW,mBACXC,cAAe,+BACfC,kBAAmB,eACnBC,MAAO,8CAwDIC,MAnDf,WACE,MAA0BjD,oBAAS,GAAnC,mBAAOL,EAAP,KAAcuD,EAAd,KAEA,EAAwBlD,mBAAS,IAAjC,mBAAOD,EAAP,KAAaoD,EAAb,KAKMC,EAAOC,cACPC,EAAW,IAAIC,IAEfhE,EAAe,WAEnBiE,YAAgBJ,EAAME,GACrBG,MAAK,SAACC,GACL,IAAM3D,EAAO2D,EAAO3D,KACpBmD,GAAS,GACTC,EAAQpD,GAAQ,OAGf4D,OAAM,SAACC,GACRlC,QAAQkC,MAAMA,OAIZlE,EAAkB,WACtBmE,YAAQT,GAAMK,MAAK,WACjBP,GAAS,MACRS,OAAM,SAACC,GACRlC,QAAQkC,MAAMA,OAMlB,OACE,sBAAKhE,UAAU,MAAf,UACE,qBAAKA,UAAU,aAAf,SACE,uBAAOkE,MAAI,EAACC,OAAK,EAACC,UAAQ,EAACpE,UAAU,qBAArC,SACE,wBAAQuC,IAAK8B,EAAOC,KAAK,kBAI7B,sBAAKtE,UAAU,eAAf,UACE,cAACP,EAAD,CAAQE,aAAcA,EAAcI,MAAOA,EAAOD,gBAAiBA,IACnE,cAAC+C,EAAD,CAAM9C,MAAOA,EAAOJ,aAAcA,EAAcG,gBAAiBA,EAAiBK,KAAMA,WC3DhGoE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.39707dbf.chunk.js","sourcesContent":["\nfunction Header(props) {\n  const {\n    handlerLogin = Function.prototype, \n    handlerLoginOut = Function.prototype,\n    login\n  } = props\n\n  return (\n    <header className=\"header\">\n      <div className=\"header__container\">\n        <div className=\"header__decoration\">\n          <div className=\"header__circle\"></div>\n          <div className=\"header__circle\"></div>\n          <div className=\"header__circle\"></div>\n        </div>\n        <div className=\"header__nav\">\n          {login ? (\n            <button className=\"header__btn\" onClick={handlerLoginOut}>Выйти</button>\n          ) : (\n            <button className=\"header__btn\" onClick={handlerLogin}>Логин</button>\n          )}\n        </div>\n      </div>\n    </header>\n  );\n}\n\nexport { Header };\n","import { useState, useEffect} from \"react\";\nimport { getFirestore, collection, addDoc, serverTimestamp, doc, onSnapshot, query, where } from \"firebase/firestore\"\nimport { useCollectionData } from \"react-firebase-hooks/firestore\"\n\n\n\nfunction Chat(props) {\n  const {user} = props\n  const [value, setValue] = useState('');\n\n  const [messages, setMessages] = useState([]);\n\n\n  const db = getFirestore();\n\n  /* Отправка данных */\n  const sendMessage = async () => {\n    \n    await addDoc(collection(db, 'chat'), {\n      uid: user.uid,\n      user: user.displayName,\n      photo: user.photoURL,\n      text: value,\n      createAt: serverTimestamp()\n    });\n    setValue(''); \n  };\n\n  /* Получение данных */\n  useEffect(() => {\n    const getData = query(collection(db, 'chat'))\n    onSnapshot(getData, (querySnapshot) => {\n      var arr = [];\n      querySnapshot.forEach(function(doc) {\n        console.log(doc.data().createAt, \" => \", doc.data());\n        arr.push(doc.data());\n      })\n      arr.sort((a,b) => \n        (a.createAt - b.createAt)\n      )\n      setMessages(arr);\n  });\n  }, [db])\n\n  return (\n    <section className=\"chat\">\n      <div className=\"chat__content\">\n      {messages.map(\n        (item)  => (\n              <div className=\"chat__item\" key={item.createAt} id={item.createAt}>\n                <div className=\"chat__item-photo\">\n                  <img src={item.photo} alt={item.user}/>\n                </div>\n                <div className=\"chat__item-content\">\n                  \n                  <p className=\"chat__item-title\">{item.user}</p>\n                  <p className=\"chat__item-text\">{item.text}</p>\n                </div>\n              </div>\n        )        \n      )}\n      </div>\n      <div className=\"chat__logic\">\n        <textarea\n          className=\"chat__textarea\"\n          placeholder=\"...\"\n          value={value}\n          onChange={event => setValue(event.target.value)}\n        ></textarea>\n        <button className=\"chat__send\" onClick={sendMessage}>Отправить</button>\n      </div>\n    </section>\n  );\n}\n\nexport { Chat };\n","\nimport {Chat} from \"../Chat/Chat\"\n\nfunction Main(props) {\n  const {\n    handlerLogin = Function.prototype,\n    login,\n    user\n\n  } = props;\n\nreturn (\n  <main className=\"main\">\n    {login ? (\n        <Chat user={user} />\n    ) : (\n      <button className=\"main__btn\" onClick={handlerLogin}>Логин</button>\n    )}\n  </main>\n  )\n}\n\nexport { Main };\n","export default __webpack_public_path__ + \"static/media/video.1f2ae74d.mp4\";","import { useState } from \"react\";\nimport { Header } from \"./components/Header/Header\";\nimport { Main } from \"./components/Main/Main\";\nimport video from \"./files/video.mp4\";\n\nimport { initializeApp } from \"firebase/app\";\n/* инициализация firebase  */\n\nimport { getAuth, signOut, signInWithPopup, GoogleAuthProvider } from \"firebase/auth\";\n/* инициализация авторизации Google */\n\nconst firebase = initializeApp(\n  {\n    apiKey: \"AIzaSyDpwhpepw1f31gclJpDwp0UeIEJnBCeFsk\",\n    authDomain: \"chat-react-32af1.firebaseapp.com\",\n    projectId: \"chat-react-32af1\",\n    storageBucket: \"chat-react-32af1.appspot.com\",\n    messagingSenderId: \"713769401807\",\n    appId: \"1:713769401807:web:e98fab4abf5a46539566ba\"\n  }\n);\n\n\nfunction App() {\n  const [login, setLogin] = useState(false);\n  /* стэйт залогинен пользователь или нет */\n  const [user, setUser] = useState([])\n  /* стэйт информация о пользователе */\n\n  \n  /* start logIN / logOUT */\n  const auth = getAuth();\n  const provider = new GoogleAuthProvider();\n\n  const handlerLogin = () => {\n    \n    signInWithPopup(auth, provider)\n    .then((result) => {\n      const user = result.user;\n      setLogin(true)\n      setUser(user || [])\n\n      // console.log(user)\n    }).catch((error) => {\n      console.error(error)\n    });\n  }\n\n  const handlerLoginOut = () => {\n    signOut(auth).then(() => {\n      setLogin(false)\n    }).catch((error) => {\n      console.error(error)\n    });\n  }\n\n  /* end logIN / logOUT */\n\n  return (\n    <div className=\"app\">\n      <div className=\"app__video\">\n        <video loop muted autoPlay className=\"app__video-content\">\n          <source src={video} type=\"video/mp4\" />\n        </video>\n      </div>\n\n      <div className=\"app__content\">\n        <Header handlerLogin={handlerLogin} login={login} handlerLoginOut={handlerLoginOut}/>\n        <Main login={login} handlerLogin={handlerLogin} handlerLoginOut={handlerLoginOut} user={user}/>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './styles.scss';\nimport App from './App';\n\n\n\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}